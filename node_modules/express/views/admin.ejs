<!DOCTYPE html>
<html>
<head>
  <title>Admin</title>
  <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="admin.css">
</head>
<body>
  <% include partials/header %>

<div class="container pt-5">
<div class="row justify-content-center">
  <div class="col-sm-6 ">
<div class="jumbotron">
    <center><h4 class="display-4">Display all users or tweets</h4></center>
    <div class="card" id="tweet">
        <div class="card-body" id="adminBody">

        </div>
    </div>

<br>
  <center>
  <button onclick="getUsers()" class="btn btn-dark btn-lg">Get Users</button>
  <button onclick="getTweets()" class="btn btn-dark btn-lg">Get Tweets</button>
  </center>
  </div>
  </div>
  </div>
  </div>
  <script>
    function getUsers(){
        console.log('fetching users');
        $.ajax
            ({
               type: "get",
               url: "/admin/getUsers",
               contentType: "application/json; charset=UTF-8",

            }).done(function ( users ) {
                  var userInfoSpace=document.getElementById("adminBody");
                  var userInfo="";
                  //var tweetTag=`<div><h3>Number of likes: ${tweetData.likes}</h3><br><h3>Number of retweets: ${tweetData.retweets}</h3></div>`;
                 users.forEach(function(user){
                   userInfo += `<p>username: ${user.username}<br>firstname: ${user.firstName}<br>lastname: ${user.lastName}<br>email: ${user.email}<br>gender: ${user.gender}<br>account type: ${user.accType}<br><hr></p>`;
                });
                  userInfoSpace.innerHTML = userInfo;
                  console.log('Users Fetched');
            });
    }
            </script>
            <script>
              function getTweets(){
                  console.log('fetching tweets');
                  $.ajax
                      ({
                         type: "get",
                         url: "/admin/getTweets",
                         contentType: "application/json; charset=UTF-8",

                      }).done(function ( tweets ) {
                            var tweetInfoSpace=document.getElementById("adminBody");
                            var tweetInfo="";
                            //var tweetTag=`<div><h3>Number of likes: ${tweetData.likes}</h3><br><h3>Number of retweets: ${tweetData.retweets}</h3></div>`;
                           tweets.forEach(function(tweet){
                             tweetInfo += `<p>Tweet ID: ${tweet.id}<br>Created At: ${tweet.created_at}<br>Contet: <a href="${tweet.content}" target="_blank">${tweet.content}</a> <br>Retweets: ${tweet.retweets}<br>Likes:  ${tweet.likes}<br><hr></p>`;
                            console.log("tizi");
                          });
                            tweetInfoSpace.innerHTML = tweetInfo;
                            console.log('Tweets Fetched');
                      });
              }
                      </script>
  <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js" integrity="sha384-pjaaA8dDz/5BgdFUPX6M/9SUZv4d12SUPF0axWc+VRZkx5xU3daN+lYb49+Ax+Tl" crossorigin="anonymous"></script>
  </body>
</html>
